import{r as o,_ as b,R as u,b as k,c as j,P as a,d as w,j as e}from"./index-CuX69uBB.js";import{C as x}from"./index.esm-BCXG8y5N.js";import"./index.es-BaniHJel.js";import{C as v}from"./CRow-BW3UvCaF.js";import{C}from"./CCol-CG101rVw.js";import{C as E}from"./CCard-Dt_b82-W.js";import{C as N}from"./CCardBody-D_GPOYkj.js";var m=o.forwardRef(function(r,n){var t,i=r.action,g=r.chart,h=r.className,l=r.color,y=r.title,d=r.value,p=b(r,["action","chart","className","color","title","value"]);return u.createElement(E,k({className:j((t={},t["bg-".concat(l)]=l,t["text-white"]=l,t),h)},p,{ref:n}),u.createElement(N,{className:"pb-0 d-flex justify-content-between align-items-start"},u.createElement("div",null,d&&u.createElement("div",{className:"fs-4 fw-semibold"},d),y&&u.createElement("div",null,y)),i),g)});m.propTypes={action:a.node,chart:a.oneOfType([a.string,a.node]),className:a.string,color:w,title:a.oneOfType([a.string,a.node]),value:a.oneOfType([a.string,a.node,a.number])};m.displayName="CWidgetStatsA";var f=function(r,n){if(!(typeof window>"u")&&!(typeof document>"u")){var t=document.body;return window.getComputedStyle(t,null).getPropertyValue(r).replace(/^\s/,"")}};const R=r=>{const n=o.useRef(null),t=o.useRef(null);o.useEffect(()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{n.current&&setTimeout(()=>{n.current.data.datasets[0].pointBackgroundColor=f("--cui-primary"),n.current.update()}),t.current&&setTimeout(()=>{t.current.data.datasets[0].pointBackgroundColor=f("--cui-info"),t.current.update()})})},[n,t]);const[i,g]=o.useState(null),[h,l]=o.useState(!0),[y,d]=o.useState(null);o.useEffect(()=>{const c=localStorage.getItem("token");if(!c){d("No token found in local storage"),l(!1);return}fetch("https://api.staging.k8s.isypay.net/api/balance/bank",{headers:{Authorization:"Bearer "+c}}).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{if(Object.keys(s).length===0&&s.constructor===Object)throw new Error("Empty response received");g(s),l(!1)}).catch(s=>{console.error("Error fetching balance:",s),d(s.message),l(!1)})},[]);const p=c=>typeof c!="number"?c:c.toLocaleString("fr-FR").replace(/\s/g,"â€‰");return e.jsxs(v,{className:r.className,xs:{gutter:4},children:[e.jsx(C,{sm:6,xl:4,xxl:3,children:e.jsx(m,{style:{backgroundColor:"#14de94"},value:i?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Fiat Balance :"}),e.jsxs("p",{children:[p(i.fiatBalance)," CFA"]})]}):e.jsx("p",{children:"Loading..."}),chart:e.jsx(x,{ref:n,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:f("--cui-primary"),data:[65,59,84,84,51,55,40]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:30,max:89,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(C,{sm:6,xl:4,xxl:3,children:e.jsx(m,{color:"info",value:i?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Token Balance :"}),e.jsx("p",{children:p(i.tokenBalance)})]}):e.jsx("p",{children:"Loading..."}),chart:e.jsx(x,{ref:t,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:f("--cui-info"),data:[1,18,9,17,34,22,11]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:-9,max:39,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})})]})};R.propTypes={className:a.string,withCharts:a.bool};export{R as W,f as g};
