import{r as l,_ as E,R as p,b as R,c as B,P as a,d as A,j as e}from"./index-CNvfjNbc.js";import{C as b}from"./index.esm-BULCO5aR.js";import{a as C}from"./index.es-CN07cnBm.js";import{C as S}from"./CRow-BG6Bysw9.js";import{C as j}from"./CCol-D-XABWtU.js";import{C as T}from"./CCard-HEP0UVqH.js";import{C as F}from"./CCardBody-CbCgc-Oc.js";import{j as w,k,l as N,m as o}from"./DefaultLayout-gk70IT70.js";import{c as v}from"./cil-options-sHCm5Gxk.js";var h=l.forwardRef(function(r,n){var t,c=r.action,g=r.chart,x=r.className,i=r.color,y=r.title,d=r.value,u=E(r,["action","chart","className","color","title","value"]);return p.createElement(T,R({className:B((t={},t["bg-".concat(i)]=i,t["text-white"]=i,t),x)},u,{ref:n}),p.createElement(F,{className:"pb-0 d-flex justify-content-between align-items-start"},p.createElement("div",null,d&&p.createElement("div",{className:"fs-4 fw-semibold"},d),y&&p.createElement("div",null,y)),c),g)});h.propTypes={action:a.node,chart:a.oneOfType([a.string,a.node]),className:a.string,color:A,title:a.oneOfType([a.string,a.node]),value:a.oneOfType([a.string,a.node,a.number])};h.displayName="CWidgetStatsA";var f=function(r,n){if(!(typeof window>"u")&&!(typeof document>"u")){var t=document.body;return window.getComputedStyle(t,null).getPropertyValue(r).replace(/^\s/,"")}};const D=r=>{const n=l.useRef(null),t=l.useRef(null);l.useEffect(()=>{document.documentElement.addEventListener("ColorSchemeChange",()=>{n.current&&setTimeout(()=>{n.current.data.datasets[0].pointBackgroundColor=f("--cui-primary"),n.current.update()}),t.current&&setTimeout(()=>{t.current.data.datasets[0].pointBackgroundColor=f("--cui-info"),t.current.update()})})},[n,t]);const[c,g]=l.useState(null),[x,i]=l.useState(!0),[y,d]=l.useState(null);l.useEffect(()=>{const m=localStorage.getItem("token");if(!m){d("No token found in local storage"),i(!1);return}fetch("https://api.staging.k8s.isypay.net/api/balance/bank",{headers:{Authorization:"Bearer "+m}}).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{if(Object.keys(s).length===0&&s.constructor===Object)throw new Error("Empty response received");g(s),i(!1)}).catch(s=>{console.error("Error fetching balance:",s),d(s.message),i(!1)})},[]);const u=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CFA"}).format(m);return e.jsxs(S,{className:r.className,xs:{gutter:4},children:[e.jsx(j,{sm:6,xl:4,xxl:3,children:e.jsx(h,{style:{backgroundColor:"#14de94"},value:c?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["Token Balance: ",u(c.tokenBalance)]})}):e.jsx("p",{children:"Loading..."}),action:e.jsxs(w,{alignment:"end",children:[e.jsx(k,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(C,{icon:v})}),e.jsxs(N,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(b,{ref:n,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:f("--cui-primary"),data:[65,59,84,84,51,55,40]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:30,max:89,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1,tension:.4},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})}),e.jsx(j,{sm:6,xl:4,xxl:3,children:e.jsx(h,{color:"info",value:c?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["Fiat Balance: ",u(c.fiatBalance)]})}):e.jsx("p",{children:"Loading..."}),action:e.jsxs(w,{alignment:"end",children:[e.jsx(k,{color:"transparent",caret:!1,className:"text-white p-0",children:e.jsx(C,{icon:v})}),e.jsxs(N,{children:[e.jsx(o,{children:"Action"}),e.jsx(o,{children:"Another action"}),e.jsx(o,{children:"Something else here..."}),e.jsx(o,{disabled:!0,children:"Disabled action"})]})]}),chart:e.jsx(b,{ref:t,className:"mt-3 mx-3",style:{height:"70px"},data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"transparent",borderColor:"rgba(255,255,255,.55)",pointBackgroundColor:f("--cui-info"),data:[1,18,9,17,34,22,11]}]},options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{x:{border:{display:!1},grid:{display:!1,drawBorder:!1},ticks:{display:!1}},y:{min:-9,max:39,display:!1,grid:{display:!1},ticks:{display:!1}}},elements:{line:{borderWidth:1},point:{radius:4,hitRadius:10,hoverRadius:4}}}})})})]})};D.propTypes={className:a.string,withCharts:a.bool};export{D as W,f as g};
